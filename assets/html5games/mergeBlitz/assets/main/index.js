System.register("chunks:///main.js",["cc"],(function(){var t,e,n,o,i,r,a,l,s,c,u,h,p,d,g,f,m,v,b,y,C,S,w,T,L,M;return{setters:[function(E){t=E.cclegacy,e=E._decorator,n=E.Node,o=E.Color,i=E.Canvas,r=E.UITransform,a=E.instantiate,l=E.Label,s=E.RichText,c=E.Toggle,u=E.Button,h=E.director,p=E.Component,d=E.AudioSource,g=E.AudioClip,f=E.randomRange,m=E.v3,v=E.Tween,b=E.tween,y=E.Prefab,C=E.Vec2,S=E.input,w=E.Input,T=E.RigidBody2D,L=E.Collider2D,M=E.Contact2DType}],execute:function(){function E(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
E=function(){return e};var t,e={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",l=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,o){var r=e&&e.prototype instanceof m?e:m,a=Object.create(r.prototype),l=new O(o||[]);return i(a,"_invoke",{value:M(t,n,l)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",d="executing",g="completed",f={};function m(){}function v(){}function b(){}var y={};c(y,a,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(_([])));S&&S!==n&&o.call(S,a)&&(y=S);var w=b.prototype=m.prototype=Object.create(y);function T(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function n(i,r,a,l){var s=h(t[i],t,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&o.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,l)}))}l(s.arg)}var r;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,i){n(t,o,e,i)}))}return r=r?r.then(i,i):i()}})}function M(e,n,o){var i=p;return function(r,a){if(i===d)throw new Error("Generator is already running");if(i===g){if("throw"===r)throw a;return{value:t,done:!0}}for(o.method=r,o.arg=a;;){var l=o.delegate;if(l){var s=x(l,o);if(s){if(s===f)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===p)throw i=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=d;var c=h(e,n,o);if("normal"===c.type){if(i=o.done?g:"suspendedYield",c.arg===f)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(i=g,o.method="throw",o.arg=c.arg)}}}function x(e,n){var o=n.method,i=e.iterator[o];if(i===t)return n.delegate=null,"throw"===o&&e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),f;var r=h(i,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,f):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function B(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(B,this),this.reset(!0)}function _(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function n(){for(;++i<e.length;)if(o.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}return v.prototype=b,i(w,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:v,configurable:!0}),v.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},T(L.prototype),c(L.prototype,l,(function(){return this})),e.AsyncIterator=L,e.async=function(t,n,o,i,r){void 0===r&&(r=Promise);var a=new L(u(t,n,o,i),r);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},T(w),c(w,s,"Generator"),c(w,a,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(o,i){return l.type="throw",l.arg=e,n.next=o,i&&(n.method="next",n.arg=t),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],l=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:_(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),f}},e}function x(t,e,n,o,i,r,a){try{var l=t[r](a),s=l.value}catch(t){return void n(t)}l.done?e(s):Promise.resolve(s).then(o,i)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){x(r,o,i,a,l,"next",t)}function l(t){x(r,o,i,a,l,"throw",t)}a(void 0)}))}}function I(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,O(t,e)}function O(t,e){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t,e,n,o){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(o):void 0})}function A(t,e,n,o,i){var r={};return Object.keys(o).forEach((function(t){r[t]=o[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,o){return o(t,e,n)||n}),r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}var F,P,k,N,G,z,R,H,j;t._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var U,V,W,Q,X,Z,K,Y,J,q,$,tt,et,nt,ot,it,rt,at,lt=e.ccclass,st=e.property;F=lt("internal.DebugViewRuntimeControl"),P=st(n),k=st(n),N=st(n),F((R=A((z=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return D(e=t.call.apply(t,[this].concat(i))||this,"compositeModeToggle",R,_(e)),D(e,"singleModeToggle",H,_(e)),D(e,"EnableAllCompositeModeButton",j,_(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[o.WHITE,o.BLACK,o.RED,o.GREEN,o.BLUE],e}I(e,t);var n=e.prototype;return n.start=function(){if(this.node.parent.getComponent(i)){var t=this.node.parent.getComponent(r),e=.5*t.width,n=.5*t.height,h=.1*e-e,p=n-.1*n,d=this.node.getChildByName("MiscMode"),g=a(d);g.parent=this.node,g.name="Buttons";var f=a(d);f.parent=this.node,f.name="Titles";for(var m=0;m<2;m++){var v=a(this.EnableAllCompositeModeButton.getChildByName("Label"));v.setPosition(h+(m>0?450:150),p,0),v.setScale(.75,.75,.75),v.parent=f;var b=v.getComponent(l);b.string=m?"----------Composite Mode----------":"----------Single Mode----------",b.color=o.WHITE,b.overflow=0,this.labelComponentList[this.labelComponentList.length]=b}p-=20;for(var y=0,C=0;C<this.strSingle.length;C++,y++){C===this.strSingle.length>>1&&(h+=200,y=0);var S=C?a(this.singleModeToggle):this.singleModeToggle;S.setPosition(h,p-20*y,0),S.setScale(.5,.5,.5),S.parent=this.singleModeToggle.parent;var w=S.getComponentInChildren(s);w.string=this.strSingle[C],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,S.on(c.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[C]=S}h+=200,this.EnableAllCompositeModeButton.setPosition(h+15,p,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(u.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=g;var T=this.EnableAllCompositeModeButton.getComponentInChildren(l);this.labelComponentList[this.labelComponentList.length]=T;var L=a(this.EnableAllCompositeModeButton);L.setPosition(h+90,p,0),L.setScale(.5,.5,.5),L.on(u.EventType.CLICK,this.changeTextColor,this),L.parent=g,(T=L.getComponentInChildren(l)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=T;var M=a(this.EnableAllCompositeModeButton);M.setPosition(h+200,p,0),M.setScale(.5,.5,.5),M.on(u.EventType.CLICK,this.hideUI,this),M.parent=this.node.parent,(T=M.getComponentInChildren(l)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=T,this.hideButtonLabel=T,p-=40;for(var E=0;E<this.strMisc.length;E++){var x=a(this.compositeModeToggle);x.setPosition(h,p-20*E,0),x.setScale(.5,.5,.5),x.parent=d;var B=x.getComponentInChildren(s);B.string=this.strMisc[E],this.textComponentList[this.textComponentList.length]=B,this.textContentList[this.textContentList.length]=B.string,x.getComponent(c).isChecked=!!E,x.on(c.EventType.TOGGLE,E?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[E]=x}p-=150;for(var I=0;I<this.strComposite.length;I++){var O=I?a(this.compositeModeToggle):this.compositeModeToggle;O.setPosition(h,p-20*I,0),O.setScale(.5,.5,.5),O.parent=this.compositeModeToggle.parent;var _=O.getComponentInChildren(s);_.string=this.strComposite[I],this.textComponentList[this.textComponentList.length]=_,this.textContentList[this.textContentList.length]=_.string,O.on(c.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[I]=O}}else console.error("debug-view-runtime-control should be child of Canvas")},n.isTextMatched=function(t,e){var n=new String(t),o=n.search(">");return-1===o?t===e:(n=(n=n.substr(o+1)).substr(0,n.search("<")))===e},n.toggleSingleMode=function(t){for(var e=h.root.debugView,n=t.getComponentInChildren(s),o=0;o<this.strSingle.length;o++)this.isTextMatched(n.string,this.strSingle[o])&&(e.singleMode=o)},n.toggleCompositeMode=function(t){for(var e=h.root.debugView,n=t.getComponentInChildren(s),o=0;o<this.strComposite.length;o++)this.isTextMatched(n.string,this.strComposite[o])&&e.enableCompositeMode(o,t.isChecked)},n.toggleLightingWithAlbedo=function(t){h.root.debugView.lightingWithAlbedo=t.isChecked},n.toggleCSMColoration=function(t){h.root.debugView.csmLayerColoration=t.isChecked},n.enableAllCompositeMode=function(t){var e=h.root.debugView;e.enableAllCompositeMode(!0);for(var n=0;n<this.compositeModeToggleList.length;n++){this.compositeModeToggleList[n].getComponent(c).isChecked=!0}var o=this.miscModeToggleList[0].getComponent(c);o.isChecked=!1,e.csmLayerColoration=!1,(o=this.miscModeToggleList[1].getComponent(c)).isChecked=!0,e.lightingWithAlbedo=!0},n.hideUI=function(t){var e=this.node.getChildByName("Titles"),n=!e.active;this.singleModeToggleList[0].parent.active=n,this.miscModeToggleList[0].parent.active=n,this.compositeModeToggleList[0].parent.active=n,this.EnableAllCompositeModeButton.parent.active=n,e.active=n,this.hideButtonLabel.string=n?"Hide UI":"Show UI"},n.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var n=0;n<this.labelComponentList.length;n++)this.labelComponentList[n].color=this.color[this._currentColorIndex]},n.onLoad=function(){},n.update=function(t){},e}(p)).prototype,"compositeModeToggle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=A(z.prototype,"singleModeToggle",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=A(z.prototype,"EnableAllCompositeModeButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=z));t._RF.pop(),t._RF.push({},"78b05dEB0dGwb1Nn14a45oX","AudioManager",void 0);var ct,ut,ht,pt,dt,gt,ft,mt,vt,bt,yt,Ct,St,wt,Tt=e.ccclass,Lt=e.property,Mt=(U=Tt("AudioManager"),V=Lt({type:d}),W=Lt({type:g}),Q=Lt({type:g}),X=Lt({type:g}),Z=Lt({type:g}),K=Lt({type:g}),Y=Lt({type:g}),U(((at=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return D(e=t.call.apply(t,[this].concat(o))||this,"audioSource",$,_(e)),D(e,"backgroundMusic",tt,_(e)),D(e,"backgroundMusicCritical",et,_(e)),D(e,"ballDroppingFx",nt,_(e)),D(e,"droppedSoundFxs",ot,_(e)),D(e,"animalSoundFxs",it,_(e)),D(e,"soundBlastEffect",rt,_(e)),e}I(e,t),e.getInstance=function(){return this._instance};var n=e.prototype;return n.onLoad=function(){e._instance=this,this.playBackgroundMusic()},n.playBackgroundMusic=function(){this.audioSource&&this.backgroundMusic&&(this.audioSource.clip=this.backgroundMusic,this.audioSource.play(),this.audioSource.volume=.5)},n.playBackgroundMusicDanger=function(){this.audioSource.stop(),this.audioSource&&this.backgroundMusicCritical&&(this.audioSource.clip=this.backgroundMusicCritical,this.audioSource.play(),this.audioSource.volume=.5)},n.playBackgroundMusicCritical=function(){this.audioSource&&this.backgroundMusicCritical&&(this.audioSource.clip=this.backgroundMusicCritical,this.audioSource.play())},n.playBallDropping=function(){this.audioSource&&this.ballDroppingFx&&(this.audioSource.clip=this.ballDroppingFx,this.audioSource.play())},n.playSoundDroppedBall=function(){this.audioSource&&this.droppedSoundFxs[f(0,3)]&&(this.audioSource.clip=this.droppedSoundFxs[f(0,3)],this.audioSource.play())},n.playSoundBlastEffect=function(){this.audioSource&&this.soundBlastEffect&&(this.audioSource.clip=this.soundBlastEffect,this.audioSource.play())},n.playAnimalSound=function(t){this.audioSource.clip=this.animalSoundFxs[t],this.audioSource.play()},e}(p))._instance=null,$=A((q=at).prototype,"audioSource",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=A(q.prototype,"backgroundMusic",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=A(q.prototype,"backgroundMusicCritical",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=A(q.prototype,"ballDroppingFx",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=A(q.prototype,"droppedSoundFxs",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),it=A(q.prototype,"animalSoundFxs",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rt=A(q.prototype,"soundBlastEffect",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=q))||J);t._RF.pop(),t._RF.push({},"ba4bfg4nFhL+IXvTNRnEqoS","GameManager",void 0);var Et,xt,Bt,It,Ot,_t,Dt,At,Ft,Pt,kt,Nt,Gt,zt,Rt,Ht,jt=e.ccclass,Ut=e.property,Vt=(ct=jt("GameManager"),ut=Ut({type:n}),ht=Ut({type:l}),pt=Ut({type:n}),dt=Ut({type:n}),gt=Ut({type:l}),ct(((wt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).touchEnabled=!1,e.isGameOver=!1,D(e,"mainMenu",vt,_(e)),D(e,"scoreText",bt,_(e)),D(e,"gameScreen",yt,_(e)),D(e,"gameOverScreen",Ct,_(e)),D(e,"scoreLabel",St,_(e)),e.currentScore={value:0},e.finalScore=0,e.duration=2,e.finalDuration=.5,e}I(e,t),e.getInstance=function(){return this._instance};var n=e.prototype;return n.onLoad=function(){e._instance=this,this.showMainMenu()},n.showMainMenu=function(){this.isGameOver=!1,this.mainMenu&&(this.mainMenu.active=!0,this.moveNode(this.mainMenu,m(-3e3,0,0),m(0,0,0))),this.gameOverScreen&&this.moveNode(this.gameOverScreen,m(0,0,0),m(3e3,0,0))},n.startGame=function(){this.updateScore(1),this.gameScreen&&(this.gameScreen.active=!0,this.moveNode(this.mainMenu,m(0,0,0),m(-3e3,0,0)),this.moveNode(this.gameScreen,m(3e3,0,0),m(0,0,0))),Zt.getInstance().startGame()},n.gameOver=function(){this.isGameOver||(this.gameOverScreen&&(this.gameOverScreen.active=!0,this.moveNode(this.gameOverScreen,m(-3e3,0,0),m(0,0,0))),this.typewriteValue(30444),Mt.getInstance().playBackgroundMusicDanger(),this.isGameOver=!0)},n.moveNode=function(t,e,n){t.setPosition(e);var o=new v(t);o.to(.5,{position:n},{easing:"sineOut"}),o.start()},n.updateScore=function(t){console.log("updatingScore");var e=100*t;this.scoreText.string=""+e},n.onRetryButtonClicked=function(){this.isGameOver=!1,this.updateScore(1),this.gameOverScreen&&this.moveNode(this.gameOverScreen,m(0,0,0),m(800,0,0)),Zt.getInstance().startGame()},n.typewriteValue=function(t){var e=this,n={value:0};b(n).to(this.duration,{value:t},{onUpdate:function(){e.scoreLabel&&(e.scoreLabel.string=Math.floor(n.value).toString())},onComplete:function(){e.updateFinalValue(t)}}).start()},n.updateFinalValue=function(t){var e,n=this,o={value:parseInt((null==(e=this.scoreLabel)?void 0:e.string)||"0")};b(o).to(this.finalDuration,{value:t},{onUpdate:function(){n.scoreLabel&&(n.scoreLabel.string=Math.floor(o.value).toString())}}).start()},e}(p))._instance=null,vt=A((mt=wt).prototype,"mainMenu",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=A(mt.prototype,"scoreText",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=A(mt.prototype,"gameScreen",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=A(mt.prototype,"gameOverScreen",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=A(mt.prototype,"scoreLabel",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=mt))||ft);t._RF.pop(),t._RF.push({},"dbd09SnGX5Nd7f5r9W1873/","ballGenerator",void 0);var Wt,Qt=e.ccclass,Xt=e.property,Zt=(Et=Qt("BallGenerator"),xt=Xt({type:y}),Bt=Xt({type:[y]}),It=Xt({type:n}),Ot=Xt({type:n}),_t=Xt({type:C}),Dt=Xt({type:C}),Et(((Ht=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).touchEnabled=!1,D(e,"balls",Pt,_(e)),e.ballQueue=[],D(e,"blastFxs",kt,_(e)),e.isDropping=!1,e.ballReadytoDrop=!1,e.activeBall=null,D(e,"ballHolder",Nt,_(e)),D(e,"gameBallHolder",Gt,_(e)),D(e,"ballSpawnPos",zt,_(e)),D(e,"ballSpawnPosCenter",Rt,_(e)),e.customOrder=[0,0,1,1,2,2,3,1,1,0,4,3,3,2,1,0,5,0,1,1,0,6,2,3,2,2,1,4,4],e.currentIndex=0,e}I(e,t),e.getInstance=function(){return this._instance};var n=e.prototype;return n.onLoad=function(){e._instance=this,this.disableTouchInput()},n.startGame=function(){var t,e,n=null==(t=this.ballHolder)?void 0:t.children;if(n)for(var o=0;o<n.length;o++){n[o].destroy()}var i=null==(e=this.gameBallHolder)?void 0:e.children;if(i)for(var r=0;r<i.length;r++){i[r].destroy()}this.ballQueue=[],this.spawnInitialBalls()},n.enableTouchInput=function(){this.touchEnabled=!0,S.on(w.EventType.TOUCH_START,this.onTouchStart,this),S.on(w.EventType.TOUCH_END,this.onTouchEnd,this),S.on(w.EventType.TOUCH_MOVE,this.onTouchMove,this)},n.disableTouchInput=function(){this.touchEnabled=!1,S.off(w.EventType.TOUCH_START,this.onTouchStart,this),S.off(w.EventType.TOUCH_END,this.onTouchEnd,this),S.off(w.EventType.TOUCH_MOVE,this.onTouchMove,this)},n.blast=function(t){var e,n=Math.floor(Math.random()*this.blastFxs.length),o=a(this.blastFxs[n]);o.setPosition(t),o.setParent(this.gameBallHolder),null==(e=this.gameBallHolder)||e.addChild(o),this.scheduleOnce((function(){o.destroy()}),.1)},n.spawnInitialBalls=function(){for(var t=0;t<3;t++){var e=new C(this.ballSpawnPos.x+300-100*t,this.ballSpawnPos.y+10);this.spawnBallWithDelay(e,1e3*t)}},n.onTouchStart=function(t){},n.onTouchEnd=function(t){this.dropTheBall()},n.onTouchMove=function(t){this.moveQueuedBallWithTouch(t)},n.onDestroy=function(){S.off(w.EventType.TOUCH_START,this.onTouchStart,this)},n.spawnBallWithDelay=function(){var t=B(E().mark((function t(e,n){var o=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){setTimeout((function(){o.spawnBall(e),t()}),n)})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),n.spawnBallAtCollision=function(t,e){if(this.balls[e]){Mt.getInstance().playSoundDroppedBall,Vt.getInstance().updateScore(e);var n=a(this.balls[e]);n.addComponent(Jt),n.setScale(1.3*e,1.3*e),n.setParent(this.gameBallHolder),n.setPosition(t),n.getComponent(T).enabled=!0,n.active=!0}},n.spawnBall=function(t){var e=this;if(0!==this.balls.length){var n=this.balls[0],o=a(n);return o.addComponent(Jt),this.ballHolder?(this.ballHolder.addChild(o),this.ballQueue.push(o)):console.error("Ball Holder node not assigned!"),3===this.ballQueue.length?(this.enableTouchInput(),void setTimeout((function(){e.moveBallToCenterAndSpawnNew(2e3)}),1e3)):void 0}console.error("No ball prefabs available!")},n.moveBallToCenterAndSpawnNew=function(){var t=B(E().mark((function t(e){var n,o,i=this;return E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!Vt.getInstance().isGameOver){t.next=4;break}return t.abrupt("return");case 4:this.ballReadytoDrop=!1;case 5:this.ballQueue.length>0&&(this.activeBall=this.ballQueue.shift(),this.activeBall&&(this.activeBall.parent=this.gameBallHolder,n=+this.activeBall.name,o=1+1*n/2,this.activeBall.setScale(o,o),this.activeBall.setPosition(this.ballSpawnPosCenter.x,this.ballSpawnPosCenter.y),setTimeout((function(){var t=i.customOrder[i.currentIndex%i.customOrder.length],e=a(i.balls[t]);e.addComponent(Jt),e.setPosition(i.ballSpawnPos.x+300,i.ballSpawnPos.y),i.ballHolder?(i.ballHolder.addChild(e),i.ballQueue.push(e)):console.error("Ball Holder node not assigned!")}),1e3))),this.ballReadytoDrop=!0;case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.moveQueuedBallWithTouch=function(t){if(this.activeBall){var e=t.getDelta(),n=this.activeBall.position.x+e.x;this.activeBall.setPosition(n,this.ballSpawnPos.y)}},n.dropTheBall=function(){var t=this;!this.isDropping&&this.ballReadytoDrop&&(this.activeBall.getComponent(T).enabled=!0,this.isDropping=!0,Mt.getInstance().playBallDropping(),this.currentIndex++,setTimeout((function(){t.moveBallToCenterAndSpawnNew(3e3),t.isDropping=!1}),1e3))},e}(p))._instance=null,Pt=A((Ft=Ht).prototype,"balls",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kt=A(Ft.prototype,"blastFxs",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Nt=A(Ft.prototype,"ballHolder",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=A(Ft.prototype,"gameBallHolder",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=A(Ft.prototype,"ballSpawnPos",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C(200,600)}}),Rt=A(Ft.prototype,"ballSpawnPosCenter",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C(0,600)}}),At=Ft))||At);t._RF.pop(),t._RF.push({},"1785er2/z9FErkH2Bh+NziU","Ball",void 0);var Kt,Yt=e.ccclass,Jt=(e.property,Yt("Ball")(Wt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).ballNumber=1,e.mergeable=!0,e.topDangerZone=null,e}I(e,t);var n=e.prototype;return n.start=function(){var t=this.getComponent(L);t&&t.on(M.BEGIN_CONTACT,this.onBeginContact,this),this.ballNumber=+this.node.name},n.onBeginContact=function(t,n){var o=this;this.mergeable&&n.node.name===t.node.name?this.scheduleOnce((function(){o.merge(n.node.getComponent(e))}),.1):Mt.getInstance().playSoundDroppedBall()},n.checkBallPosition=function(t){return this.topDangerZone?t.y>=this.topDangerZone.position.y:(console.warn("Top Danger Zone node not assigned!"),!1)},n.merge=function(t){if(this.checkBallPosition(t.node.position),t){var e=+this.node.name;Vt.getInstance().updateScore(e),Zt.getInstance().blast(this.node.position),Mt.getInstance().playAnimalSound(+this.node.name),Zt.getInstance().spawnBallAtCollision(this.node.position,this.ballNumber),this.node.active=!1,t.node.active=!1}},e}(p))||Wt);t._RF.pop(),t._RF.push({},"2d50csesABLR7pXJ6Vn45Eu","DangerZoneCollider",void 0);(0,e.ccclass)("TestContactCallBack")(Kt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).colliding=!1,e.collisionStayTime=0,e.collisionStayThreshold=1,e}I(e,t);var n=e.prototype;return n.start=function(){var t=this.getComponent(L);t&&(t.on(M.BEGIN_CONTACT,this.onBeginContact,this),t.on(M.END_CONTACT,this.onEndContact,this))},n.onBeginContact=function(t,e,n){console.log("onBeginContact"),this.colliding=!0,this.collisionStayTime=0,this.schedule(this.checkCollisionStay,.1)},n.onEndContact=function(t,e,n){console.log("onEndContact"),this.colliding=!1,this.unschedule(this.checkCollisionStay)},n.checkCollisionStay=function(t){this.colliding&&(this.collisionStayTime+=t,this.collisionStayTime>=this.collisionStayThreshold&&(console.log("Collision Stay for a long time!"),Vt.getInstance().gameOver()))},e}(p));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map